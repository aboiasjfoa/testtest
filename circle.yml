machine:
  timezone:
    Asia/Tokyo
  environment:
    GOPATH: $HOME/go
  pre:
    - >
      curl -fsSL "https://golang.org/dl/go1.7.1.linux-amd64.tar.gz" -o golang.tar.gz &&
      sudo tar -C /usr/local -xzf golang.tar.gz &&
      rm golang.tar.gz &&
      mkdir -p "${GOPATH}"
    - export PATH=$PATH:/usr/local/go/bin

test:
  pre:
    - if [ "${CIRCLE_BRANCH}" = "gobranch" ]; then source ./ready_go.sh;fi
    - echo ${CIRCLE_BRANCH}
  override:
    - if [ "${CIRCLE_BRANCH}" = "gobranch" ]; then source ./test_go.sh;fi